

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Embedding in a RHEL for Edge image | Installing | MicroShift Branch Build</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.openshift.com/container-platform/4.1/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.openshift.com/container-platform/4.1/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.openshift.com/container-platform/4.1/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.openshift.com/container-platform/4.1/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('Branch Build');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      

      

      

      

      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../microshift_welcome/index.html">MicroShift Branch Build</a>
        
      </li>
      <li class="hidden-xs active">
        <a href="../microshift_install/microshift-install-rpm.html">Installing</a>
      </li>
      
      
      <li class="hidden-xs active">
        Embedding in a RHEL for Edge image
      </li>
      
      <span text-align="right" style="float: right !important">
        <a href="https://github.com/openshift/openshift-docs/commits/main/microshift_install/microshift-embed-in-rpm-ostree.adoc"><span class="material-icons-outlined" title="Page history">history</span></a>
        
        <a href="https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12332330&issuetype=1&components=12367614&priority=4&summary=[microshift-Branch Build]+Issue+in+file+microshift_install/microshift-embed-in-rpm-ostree.adoc">
          <span class="material-icons-outlined" title="Open an issue">bug_report</span>
        </a>
        <a href="javascript: void(0);" onclick="window.print()"><span class="material-icons-outlined" title="Print page (Save as PDF)">picture_as_pdf</span></a>
        
        
      </span>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-right"></span>About</a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1"><span id="tgSpan1" class="fa fa-angle-right"></span>Release notes</a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_release_notes/microshift-4-14-release-notes.html">MicroShift 4.14 release notes</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2"><span id="tgSpan2" class="fa fa-angle-right"></span>Getting started</a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_getting_started/microshift-understanding.html">Understanding MicroShift</a></li>
            <li><a class="" href="../microshift_getting_started/microshift-architecture.html">Architecture</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3"><span id="tgSpan3" class="fa fa-angle-down"></span>Installing</a>
      <ul id="topicGroup3" class="collapse in list-unstyled">
            <li><a class="" href="../microshift_install/microshift-install-rpm.html">Installing from RPM</a></li>
            <li><a class=" active" href="../microshift_install/microshift-embed-in-rpm-ostree.html">Embedding in a RHEL for Edge image</a></li>
            <li><a class="" href="../microshift_install/microshift-greenboot.html">Greenboot health check</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4"><span id="tgSpan4" class="fa fa-angle-right"></span>Updating clusters</a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_updating/microshift-about-updates.html">About MicroShift updates</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5"><span id="tgSpan5" class="fa fa-angle-right"></span>Support</a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_support/microshift-etcd.html">MicroShift etcd</a></li>
            <li><a class="" href="../microshift_support/microshift-sos-report.html">MicroShift sos report</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6"><span id="tgSpan6" class="fa fa-angle-right"></span>API reference</a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_rest_api/understanding-api-support-tiers.html">Understanding API tiers</a></li>
            <li><a class="" href="../microshift_rest_api/understanding-compatibility-guidelines.html">API compatibility guidelines</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-2"><span id="sgSpan-6-2" class="fa fa-caret-right"></span>&nbsp;Network APIs</a>
              <ul id="topicSubGroup-6-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/network_apis/route-route-openshift-io-v1.html">Route [route.openshift.io/v1]</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-3"><span id="sgSpan-6-3" class="fa fa-caret-right"></span>&nbsp;Security APIs</a>
              <ul id="topicSubGroup-6-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../microshift_rest_api/security_apis/securitycontextconstraints-security-openshift-io-v1.html">SecurityContextConstraints [security.openshift.io/v1]</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7"><span id="tgSpan7" class="fa fa-angle-right"></span>CLI tools</a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_cli_ref/microshift-cli-tools-introduction.html">CLI tools introduction</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-oc-cli-install.html">Installing the OpenShift CLI</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-oc-config.html">Configuring the OpenShift CLI</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-cli-using-oc.html">Using the OpenShift CLI</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-usage-oc-kubectl.html">Using oc and kubectl</a></li>
            <li><a class="" href="../microshift_cli_ref/microshift-oc-cli-commands-list.html">List of oc CLI commands</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup8"><span id="tgSpan8" class="fa fa-angle-right"></span>Configuring</a>
      <ul id="topicGroup8" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_configuring/microshift-using-config-tools.html">Using configuration tools</a></li>
            <li><a class="" href="../microshift_configuring/microshift-cluster-access-kubeconfig.html">Cluster access with kubeconfig</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup9"><span id="tgSpan9" class="fa fa-angle-right"></span>Networking</a>
      <ul id="topicGroup9" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_networking/microshift-networking.html">Networking settings</a></li>
            <li><a class="" href="../microshift_networking/microshift-firewall.html">Firewall configuration</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup10"><span id="tgSpan10" class="fa fa-angle-right"></span>Storage</a>
      <ul id="topicGroup10" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_storage/index.html">MicroShift storage overview</a></li>
            <li><a class="" href="../microshift_storage/understanding-ephemeral-storage-microshift.html">Understanding ephemeral storage for MicroShift</a></li>
            <li><a class="" href="../microshift_storage/generic-ephemeral-volumes-microshift.html">Generic ephemeral volumes for MicroShift</a></li>
            <li><a class="" href="../microshift_storage/understanding-persistent-storage-microshift.html">Understanding persistent storage for MicroShift</a></li>
            <li><a class="" href="../microshift_storage/expanding-persistent-volumes-microshift.html">Expanding persistent volumes for MicroShift</a></li>
            <li><a class="" href="../microshift_storage/microshift-storage-plugin-overview.html">Dynamic storage using the LVMS plugin</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup11"><span id="tgSpan11" class="fa fa-angle-right"></span>Running applications</a>
      <ul id="topicGroup11" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_running_apps/microshift-applications.html">Application deployment</a></li>
            <li><a class="" href="../microshift_running_apps/microshift-operators.html">Operators</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup12"><span id="tgSpan12" class="fa fa-angle-right"></span>Troubleshooting</a>
      <ul id="topicGroup12" class="collapse  list-unstyled">
            <li><a class="" href="../microshift_troubleshooting/microshift-version.html">Checking your version</a></li>
            <li><a class="" href="../microshift_troubleshooting/microshift-things-to-know.html">Additional information</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Embedding MicroShift in a RHEL for Edge image
          </h1>
        </div>
        
        
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#preparing-for-image-building_microshift-embed-in-rpm-ostree">Preparing for image building</a></li>
<li><a href="#adding-microshift-repos-image-builder_microshift-embed-in-rpm-ostree">Adding MicroShift repositories to Image Builder</a></li>
<li><a href="#adding-microshift-service_microshift-embed-in-rpm-ostree">Example Image Builder blueprint with MicroShift</a></li>
<li><a href="#provisioning-a-machine_microshift-embed-in-rpm-ostree">Provisioning a machine for MicroShift</a></li>
<li><a href="#accessing-microshift-cluster_microshift-embed-in-rpm-ostree">How to access the MicroShift cluster</a>
<ul class="sectlevel2">
<li><a href="#accessing-microshift-cluster-locally_microshift-embed-in-rpm-ostree">Accessing the MicroShift cluster locally</a></li>
<li><a href="#microshift-accessing-cluster-open-firewall_microshift-embed-in-rpm-ostree">Opening the firewall for remote access to the MicroShift cluster</a></li>
<li><a href="#accessing-microshift-cluster-remotely_microshift-embed-in-rpm-ostree">Accessing the MicroShift cluster remotely</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>You can embed MicroShift into a Red Hat Enterprise Linux (RHEL) for Edge 9.2 image. Use this guide to build a RHEL image containing MicroShift.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>MicroShift is Technology Preview only. This Technology Preview software is not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using MicroShift in production. Technology Preview provides early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.</p>
</div>
<div class="paragraph">
<p>Red Hat does not support an update path from the Technology Preview version to later versions of MicroShift. A new installation is necessary.</p>
</div>
<div class="paragraph">
<p>For more information about the support scope of Red Hat Technology Preview features, read <a href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-for-image-building_microshift-embed-in-rpm-ostree"><a class="anchor" href="#preparing-for-image-building_microshift-embed-in-rpm-ostree"></a>Preparing for image building</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Read <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/composing_installing_and_managing_rhel_for_edge_images">Composing, installing, and managing RHEL for Edge images</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>MicroShift 4.13 deployments have only been tested with Red Hat Enterprise Linux (RHEL) for Edge 9.2. Other versions of RHEL are not supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To build an Red Hat Enterprise Linux (RHEL) for Edge 9.2 image for a given CPU architecture, you need a RHEL 9.2 build host of the same CPU architecture that meets the <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/composing_installing_and_managing_rhel_for_edge_images/setting-up-image-builder_composing-installing-managing-rhel-for-edge-images#edge-image-builder-system-requirements_setting-up-image-builder">Image Builder system requirements</a>.</p>
</div>
<div class="paragraph">
<p>Follow the instructions in <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/composing_installing_and_managing_rhel_for_edge_images/setting-up-image-builder_composing-installing-managing-rhel-for-edge-images#edge-installing-image-builder_setting-up-image-builder">Installing Image Builder</a> to install Image Builder and the <code>composer-cli</code> tool.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-microshift-repos-image-builder_microshift-embed-in-rpm-ostree"><a class="anchor" href="#adding-microshift-repos-image-builder_microshift-embed-in-rpm-ostree"></a>Adding MicroShift repositories to Image Builder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the following procedure to add the MicroShift repositories to Image Builder on your build host.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your build host meets the Image Builder system requirements.</p>
</li>
<li>
<p>You have installed and set up Image Builder and the <code>composer-cli</code> tool.</p>
</li>
<li>
<p>You have root user access to your build host.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Enable the MicroShift RPM repositories on the build host by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>subscription-manager repos <span class="se">\</span>
    <span class="nt">--enable</span> rhocp-4.13-for-rhel-9-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-i</span><span class="si">)</span><span class="nt">-rpms</span> <span class="se">\</span>
    <span class="nt">--enable</span> fast-datapath-for-rhel-9-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-i</span><span class="si">)</span><span class="nt">-rpms</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/composing_installing_and_managing_rhel_for_edge_images/setting-up-image-builder_composing-installing-managing-rhel-for-edge-images#edge-image-builder-system-requirements_setting-up-image-builder">Image Builder system requirements</a>.</p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/composing_installing_and_managing_rhel_for_edge_images/setting-up-image-builder_composing-installing-managing-rhel-for-edge-images#edge-installing-image-builder_setting-up-image-builder">Installing Image Builder</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-microshift-service_microshift-embed-in-rpm-ostree"><a class="anchor" href="#adding-microshift-service_microshift-embed-in-rpm-ostree"></a>Example Image Builder blueprint with MicroShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adding the MicroShift RPM package to an Image Builder blueprint enables the build of a RHEL for Edge image with MicroShift embedded.</p>
</div>
<div class="listingblock">
<div class="title">Image Builder blueprint example</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="text">name = "minimal-microshift"

description = ""
version = "0.0.1"
modules = []
groups = []

[[packages]]
name = "microshift"
version = "4.13.0-1"

[[packages]]
name = "microshift-greenboot" <i class="conum" data-value="1"></i><b>(1)</b>
version = "4.13.0-1"

[customizations.services]
enabled = ["microshift"]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Optional <code>microshift-greenboot</code> RPM. For more information, read the "Greenboot health check" guide in the "Running Applications" section.</td>
</tr>
</table>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more details on creating a blueprint, read <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_installing_and_managing_rhel_for_edge_images/composing-a-rhel-for-edge-image-using-image-builder-command-line_composing-installing-managing-rhel-for-edge-images#proc_creating-a-rhel-for-edge-container-image-blueprint-using-image-builder-cli_composing-a-rhel-for-edge-image-using-image-builder-command-line">creating a RHEL for Edge Container blueprint using image builder CLI</a>.</p>
</li>
<li>
<p>For further customizations such as adding users, firewall rules, or kernel arguments to a blueprint, read <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/composing_installing_and_managing_rhel_for_edge_images/composing-a-rhel-for-edge-image-using-image-builder-command-line_composing-installing-managing-rhel-for-edge-images#image-customizations_composing-a-rhel-for-edge-image-using-image-builder-command-line">supported image customizations</a>.</p>
</li>
<li>
<p>For more about the composer cli, read <a href="https://www.osbuild.org/guides/user-guide/building-an-image-from-cli.html?highlight=push%20bluepring#blueprints-management-using-composer-cli">blueprint management using composer cli</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="provisioning-a-machine_microshift-embed-in-rpm-ostree"><a class="anchor" href="#provisioning-a-machine_microshift-embed-in-rpm-ostree"></a>Provisioning a machine for MicroShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Provision a machine with your RHEL for Edge image by using the procedures from the RHEL for Edge documentation.</p>
</div>
<div class="paragraph">
<p>To use MicroShift, you must provision the system so that it meets the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The machine you are provisioning must meet the system requirements for installing MicroShift.</p>
</li>
<li>
<p>The file system must have a logical volume manager (LVM) volume group (VG) with sufficient capacity for the persistent volumes (PVs) of your workload.</p>
</li>
<li>
<p>A pull secret from the <a href="https://console.redhat.com/openshift/install/pull-secret">Red Hat Hybrid Cloud Console</a> must be present as <code>/etc/crio/openshift-pull-secret</code> and have root user-only read/write permissions.</p>
</li>
<li>
<p>The firewall must be configured with MicroShift&#8217;s required firewall settings.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are using a Kickstart such as the RHEL for Edge Installer (ISO) image, you can update your Kickstart file to meet the provisioning requirements.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Prerequisites</div>
<ol class="arabic">
<li>
<p>You have created an RHEL for Edge Installer (ISO) image containing your RHEL for Edge commit with MicroShift.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>This requirement includes the steps of composing an RFE Container image, creating the RFE Installer blueprint, starting the RFE container, and composing the RFE Installer image.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a Kickstart file or use an existing one. In the Kickstart file, you must include:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Detailed instructions about how to create a user.</p>
</li>
<li>
<p>How to fetch and deploy the RHEL for Edge image.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, read "Additional resources."</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the main section of the Kickstart file, update the setup of the filesystem such that it contains an LVM volume group called <code>rhel</code> with at least 10GB system root. Leave free space for the LVMS CSI driver to use for storing the data for your workloads.</p>
<div class="listingblock">
<div class="title">Example kickstart snippet for configuring the filesystem</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="text"># Partition disk such that it contains an LVM volume group called `rhel` with a
# 10GB+ system root but leaving free space for the LVMS CSI driver for storing data.
#
# For example, a 20GB disk would be partitioned in the following way:
#
# NAME          MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
# sda             8:0    0  20G  0 disk
# ├─sda1          8:1    0 200M  0 part /boot/efi
# ├─sda1          8:1    0 800M  0 part /boot
# └─sda2          8:2    0  19G  0 part
#  └─rhel-root  253:0    0  10G  0 lvm  /sysroot
#
ostreesetup --nogpg --osname=rhel --remote=edge
--url=file:///run/install/repo/ostree/repo --ref=rhel/&lt;RHEL VERSION NUMBER&gt;/x86_64/edge
zerombr
clearpart --all --initlabel
part /boot/efi --fstype=efi --size=200
part /boot --fstype=xfs --asprimary --size=800
# Uncomment this line to add a SWAP partition of the recommended size
#part swap --fstype=swap --recommended
part pv.01 --grow
volgroup rhel pv.01
logvol / --vgname=rhel --fstype=xfs --size=10000 --name=root
# To add users, use a line such as the following
user --name=user \
--password=$6$HFVVV521NB4kOKVG$0.hM652uIOBNsC45kvFpMuRVkfNGHToMdQ6PDTU8DcEF30Gz/3DUwW153Gc9EvNMkH50qYfBO5os/FJsXTLLt. \
--iscrypted --groups=wheel</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>%post</code> section of the Kickstart file, add your pull secret and the mandatory firewall rules.</p>
<div class="listingblock">
<div class="title">Example Kickstart snippet for adding the pull secret and firewall rules</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">%post --log=/var/log/anaconda/post-install.log --erroronfail

</span><span class="gp">#</span><span class="w"> </span>Add the pull secret to CRI-O and <span class="nb">set </span>root user-only <span class="nb">read</span>/write permissions
<span class="gp">cat &gt;</span><span class="w"> </span>/etc/crio/openshift-pull-secret <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
</span><span class="go">YOUR_OPENSHIFT_PULL_SECRET_HERE
EOF
chmod 600 /etc/crio/openshift-pull-secret

</span><span class="gp">#</span><span class="w"> </span>Configure the firewall with the mandatory rules <span class="k">for </span>MicroShift
<span class="go">firewall-offline-cmd --zone=trusted --add-source=10.42.0.0/16
firewall-offline-cmd --zone=trusted --add-source=169.254.169.1

%end</span></code></pre>
</div>
</div>
</li>
<li>
<p>Install the <code>mkksiso</code> tool by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> lorax</code></pre>
</div>
</div>
</li>
<li>
<p>Update the Kickstart file in the ISO with your new Kickstart file by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>mkksiso &lt;your_kickstart&gt;.ks &lt;your_installer&gt;.iso &lt;updated_installer&gt;.iso</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/composing_installing_and_managing_rhel_for_edge_images/index">RHEL for Edge documentation</a>.</p>
</li>
<li>
<p><a href="../microshift_install/microshift-install-rpm.html#microshift-install-system-requirements_microshift-install-rpm">System requirements for installing MicroShift</a>.</p>
</li>
<li>
<p>Red Hat Hybrid Cloud Console <a href="https://console.redhat.com/openshift/install/pull-secret">pull secret</a>.</p>
</li>
<li>
<p><a href="../microshift_networking/microshift-firewall.html#microshift-firewall-req-settings_microshift-firewall">Required firewall settings</a>.</p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/performing_an_advanced_rhel_9_installation/creating-kickstart-files_installing-rhel-as-an-experienced-user">Creating a Kickstart file</a>.</p>
</li>
<li>
<p><a href="https://access.redhat.com/solutions/60959">How to embed a Kickstart file into an ISO image</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="accessing-microshift-cluster_microshift-embed-in-rpm-ostree"><a class="anchor" href="#accessing-microshift-cluster_microshift-embed-in-rpm-ostree"></a>How to access the MicroShift cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the procedures in this section to access the MicroShift cluster, either from the same machine running the MicroShift service or remotely from a workstation. You can use this access to observe and administrate workloads. When using these steps, choose the <code>kubeconfig</code> file that contains the host name or IP address you want to connect with and place it in the relevant directory. As listed in each procedure, you use the OpenShift Container Platform CLI tool (<code>oc</code>) for cluster activities.</p>
</div>
<div class="sect2">
<h3 id="accessing-microshift-cluster-locally_microshift-embed-in-rpm-ostree"><a class="anchor" href="#accessing-microshift-cluster-locally_microshift-embed-in-rpm-ostree"></a>Accessing the MicroShift cluster locally</h3>
<div class="paragraph">
<p>Use the following procedure to access the MicroShift cluster locally by using a <code>kubeconfig</code> file.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the <code>oc</code> binary.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Optional: to create a <code>~/.kube/</code> folder if your RHEL machine does not have one, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/.kube/</code></pre>
</div>
</div>
</li>
<li>
<p>Copy the generated local access <code>kubeconfig</code> file to the <code>~/.kube/</code> directory by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo cat</span> /var/lib/microshift/resources/kubeadmin/kubeconfig <span class="o">&gt;</span> ~/.kube/config</code></pre>
</div>
</div>
</li>
<li>
<p>Update the permissions on your <code>~/.kube/config</code> file by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">chmod </span>go-r ~/.kube/config</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Verify that MicroShift is running by entering the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc get all <span class="nt">-A</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="microshift-accessing-cluster-open-firewall_microshift-embed-in-rpm-ostree"><a class="anchor" href="#microshift-accessing-cluster-open-firewall_microshift-embed-in-rpm-ostree"></a>Opening the firewall for remote access to the MicroShift cluster</h3>
<div class="paragraph">
<p>Use the following procedure to open the firewall so that a remote user can access the MicroShift cluster. This procedure must be completed before a workstation user can access the cluster remotely.</p>
</div>
<div class="paragraph">
<p>For this procedure, <code>user@microshift</code> is the user on the MicroShift host machine and is responsible for setting up that machine so that it can be accessed by a remote user on a separate workstation.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the <code>oc</code> binary.</p>
</li>
<li>
<p>Your account has cluster administration privileges.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>As <code>user@microshift</code> on the MicroShift host, open the firewall port for the Kubernetes API server (<code>6443/tcp</code>) by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">[user@microshift]$</span><span class="w"> </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--permanent</span> <span class="nt">--zone</span><span class="o">=</span>public <span class="nt">--add-port</span><span class="o">=</span>6443/tcp <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>firewall-cmd <span class="nt">--reload</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>As <code>user@microshift</code>, verify that MicroShift is running by entering the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">[user@microshift]$</span><span class="w"> </span>oc get all <span class="nt">-A</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="accessing-microshift-cluster-remotely_microshift-embed-in-rpm-ostree"><a class="anchor" href="#accessing-microshift-cluster-remotely_microshift-embed-in-rpm-ostree"></a>Accessing the MicroShift cluster remotely</h3>
<div class="paragraph">
<p>Use the following procedure to access the MicroShift cluster from a remote workstation by using a <code>kubeconfig</code> file.</p>
</div>
<div class="paragraph">
<p>The <code>user@workstation</code> login is used to access the host machine remotely. The <code>&lt;user&gt;</code> value in the procedure is the name of the user that <code>user@workstation</code> logs in with to the MicroShift host.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the <code>oc</code> binary.</p>
</li>
<li>
<p>The <code>@user@microshift</code> has opened the firewall from the local host.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>As <code>user@workstation</code>, create a <code>~/.kube/</code> folder if your RHEL machine does not have one by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">[user@workstation]$</span><span class="w"> </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/.kube/</code></pre>
</div>
</div>
</li>
<li>
<p>As <code>user@workstation</code>, set a variable for the hostname of your MicroShift host by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">[user@workstation]$</span><span class="w"> </span><span class="nv">MICROSHIFT_MACHINE</span><span class="o">=</span>&lt;name or IP address of MicroShift machine&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>As <code>user@workstation</code>, copy the generated <code>kubeconfig</code> file that contains the host name or IP address you want to connect with from the RHEL machine running MicroShift to your local machine by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">[user@workstation]$</span><span class="w"> </span>ssh &lt;user&gt;@<span class="nv">$MICROSHIFT_MACHINE</span> <span class="s2">"sudo cat /var/lib/microshift/resources/kubeadmin/</span><span class="nv">$MICROSHIFT_MACHINE</span><span class="s2">/kubeconfig"</span> <span class="o">&gt;</span> ~/.kube/config</code></pre>
</div>
</div>
</li>
<li>
<p>As <code>user@workstation</code>, update the permissions on your <code>~/.kube/config</code> file by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span><span class="nb">chmod </span>go-r ~/.kube/config</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>As <code>user@workstation</code>, verify that MicroShift is running by entering the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">[user@workstation]$</span><span class="w"> </span>oc get all <span class="nt">-A</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.openshift.com/container-platform/4.1/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.openshift.com/container-platform/4.1/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.openshift.com/container-platform/4.1/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.openshift.com/container-platform/4.1/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.openshift.com/container-platform/4.1/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.openshift.com/container-platform/4.1/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'microshift';
  var version = 'Branch Build';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.com/hubfs/images/logos/Logo-RedHat-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright © 2023 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!--adjust sidebar and toc when footer is displayed -->
  <script type="text/javascript">
    sidebar = document.querySelector('.sidebar')
    toc = document.querySelector('#toc')
    main = document.querySelector('.main')
    okd_footer = document.querySelector('.footer-origin-docs')

    //handle short pages
    if (window.innerHeight === document.documentElement.scrollHeight) {
      //sidebar
      if (sidebar !== null && okd_footer == null) {
        sidebar.style.marginBottom = "38px";
        main.style.marginBottom = "35px";
      };
      //okd sidebar
      if(sidebar !== null && okd_footer !== null) {
        sidebar.style.marginBottom = "176px";
        main.style.marginBottom = "135px";
      }
    };

    //handle scrolling pages
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if ($(window).width() >= 1008) {
        if(sidebar !== null) {
          //pages with multiple toc entries
          if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
              //sidebar
              if (sidebar !== null && okd_footer == null){
                sidebar.style.marginBottom = "38px";
                main.style.marginBottom = "35px";
              };
              //toc
              if (toc !== null && okd_footer == null){
                toc.style.bottom = "35px";
              };
              //okd sidebar
              if(sidebar !== null && okd_footer !== null) {
                sidebar.style.marginBottom = "176px";
                main.style.marginBottom = "135px";
              };
              //okd toc
              if (toc !== null && okd_footer !== null){
                toc.style.bottom = "175px";
              };
            };
          if(document.documentElement.scrollHeight != window.pageYOffset + window.innerHeight) {
            sidebar.style.marginBottom = "0px";
            if (toc !== null) {
              toc.style.bottom = "0px";
            }
          }
        }
      }
    })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

</body>
</html>